
<div class="entry-analytics-container row justify-content-center mt-5">
  <h2 class="text-center col-12 mt-3">My Journaling Analytics</h2>

  <div class="analytics-information p-3 col-11 row justify-content-center">
    <div class="col-lg-6 col-sm-12 col-12 py-4 px-5 flex-wrap">

      <div class="d-flex justify-content-start align-items-center flex-wrap mb-4">
        <% @user.tags.each do |tag| %>
        <div class="tag px-2 mr-1 mt-1">
          <span><%= tag.title %></span>
        </div>
        <% end %>
      </div>

      <div>
        <%= line_chart User.group_by_week(:created_at).count %>
      </div>

      <div id="regions_div" data-region="<%= @region %>" style="width: 900px; height: 500px;"></div>
    </div>
  </div>
</div>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>



<script type="text/javascript">
google.charts.load('current', {
        'packages':['geochart'],
        'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
      });
      google.charts.setOnLoadCallback(drawRegionsMap);

      function drawRegionsMap() {
        var dataInformation = JSON.parse(document.querySelector("#regions_div").dataset["region"]);
        console.log(dataInformation);
        var data = google.visualization.arrayToDataTable(dataInformation);
        var options = {
          colorAxis: {colors: ['#F18065', '#891B00']},
          backgroundColor: '#fff',
          datalessRegionColor: '#F8F6F5',
          defaultColor: '#F8F6F5',
        };
        var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));
        chart.draw(data, options);
      }

</script>

<div class="entry-container m-5">
  <br>
  <h2 class="text-center" style="color:#891B00">My Entries</h2>
  <div class="large-card p-2 bg-white mt-1 p-3">
    <div class="row justify-content-end px-3 align-items-center">
      <span class="entries-return btn-solid"><i class="fas fa-globe-americas"></i> <%= link_to "Map View", map_path %></span>
    </div>

    <div class="row justify-content-center">
      <div class="w-100 px-3">
        <%= simple_form_for :search, url: entries_path, method: "GET", html: { class: '' } do |f| %>
        <div>
        <%= f.input :query, label: false, placeholder: "Search by location, tag, or entry text...", input_html: { class: '' } %>
        </div>
        <% end %>
    </div>
    </div>


    <% if @entries.empty? && @query.present? %>
      <div class="row justify-content-center">
        <h3 class="m-3"><em>No entries found for <b><%= @query %></b>. Search again.</em></h3>
      </div>
    <% else %>
      <% if !@query.nil? %>
        <div class="row justify-content-center">
          <h3 class="m-3"><em>Showing <%= @entries.length %> result(s) for <b><%= @query %></b>...</em></h3>
        </div>
      <% end %>
      <div class="row justify-content-left">
        <% @entries.each do |entry| %>
          <div class="holder mb-4 col-xs-12 col-md-6">
            <%= link_to entry_path(entry.id) do %>
              <div class="d-flex flex-column justify-content-between entry-card p-3 h-100" style="background-color:#F0F0F0">
                <div class="d-flex">
                  <div class="date py-1 d-flex flex-column justify-content-center rounded shadow" style="width: 20%; height: 120px; color: white">
                    <span class="text-center"><%= Date::ABBR_MONTHNAMES[entry.created_at.month].upcase %></span>
                    <h1 class="text-center m-0 pt-1"><%= entry.created_at.day %></h1>
                    <span class="text-center"><%= entry.created_at.year %></span>
                  </div>
                  <div class="d-flex flex-column justify-content-center px-3 entry-information" style="width: 80%">
                    <h2 class="mb-1"><b><%= entry.title.truncate(30, omission: "...") %></b></h2>
                    <h6 class="mb-0 pl-1"><b><i class="fas fa-thumbtack"></i> <%= entry.location %></b></h6>
                  </div>
                </div>
                <div class="my-4">
                  <span><em>"<%= entry.content.truncate(350, omission: "...") %>"</em></span>
                </div>
                <div class="d-flex justify-content-end align-items-center flex-wrap">
                  <% entry.entry_tags.each do |entry_tag| %>
                    <div class="tag px-2 mr-1 mt-1">
                      <span><%= Tag.find(entry_tag.tag_id).title %></span>
                    </div>
                  <% end %>
                  <i class="fas fa-smile mt-1"></i>
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>

    <div class="row justify-content-center">
    </div>
  </div>
</div>

